<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_09) on Wed Mar 06 22:23:54 PST 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<title>StandardFacetsAccumulator (Lucene 4.2.0 API)</title>
<meta name="date" content="2013-03-06">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StandardFacetsAccumulator (Lucene 4.2.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StandardFacetsAccumulator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/lucene/facet/search/ScoringAggregator.html" title="class in org.apache.lucene.facet.search"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/lucene/facet/search/SumScoreFacetRequest.html" title="class in org.apache.lucene.facet.search"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/lucene/facet/search/StandardFacetsAccumulator.html" target="_top">Frames</a></li>
<li><a href="StandardFacetsAccumulator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.lucene.facet.search</div>
<h2 title="Class StandardFacetsAccumulator" class="title">Class StandardFacetsAccumulator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html" title="class in org.apache.lucene.facet.search">org.apache.lucene.facet.search.FacetsAccumulator</a></li>
<li>
<ul class="inheritance">
<li>org.apache.lucene.facet.search.StandardFacetsAccumulator</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../org/apache/lucene/facet/search/AdaptiveFacetsAccumulator.html" title="class in org.apache.lucene.facet.search">AdaptiveFacetsAccumulator</a>, <a href="../../../../../org/apache/lucene/facet/sampling/SamplingAccumulator.html" title="class in org.apache.lucene.facet.sampling">SamplingAccumulator</a>, <a href="../../../../../org/apache/lucene/facet/sampling/SamplingWrapper.html" title="class in org.apache.lucene.facet.sampling">SamplingWrapper</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">StandardFacetsAccumulator</span>
extends <a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html" title="class in org.apache.lucene.facet.search">FacetsAccumulator</a></pre>
<div class="block">Standard implementation for <a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html" title="class in org.apache.lucene.facet.search"><code>FacetsAccumulator</code></a>, utilizing partitions to save on memory.
 <p>
 Why partitions? Because if there are say 100M categories out of which 
 only top K are required, we must first compute value for all 100M categories
 (going over all documents) and only then could we select top K. 
 This is made easier on memory by working in partitions of distinct categories: 
 Once a values for a partition are found, we take the top K for that 
 partition and work on the next partition, them merge the top K of both, 
 and so forth, thereby computing top K with RAM needs for the size of 
 a single partition rather than for the size of all the 100M categories.
 <p>
 Decision on partitions size is done at indexing time, and the facet information
 for each partition is maintained separately.
 <p>
 <u>Implementation detail:</u> Since facets information of each partition is 
 maintained in a separate "category list", we can be more efficient
 at search time, because only the facet info for a single partition 
 need to be read while processing that partition.</div>
<dl><dt><span class="strong">WARNING: This API is experimental and might change in incompatible ways in the next release.</span></dt>
  <dd></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#DEFAULT_COMPLEMENT_THRESHOLD">DEFAULT_COMPLEMENT_THRESHOLD</a></strong></code>
<div class="block">Default threshold for using the complements optimization.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#DISABLE_COMPLEMENT">DISABLE_COMPLEMENT</a></strong></code>
<div class="block">Passing this to <a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#setComplementThreshold(double)"><code>setComplementThreshold(double)</code></a> will disable using complement optimization.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#FORCE_COMPLEMENT">FORCE_COMPLEMENT</a></strong></code>
<div class="block">Passing this to <a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#setComplementThreshold(double)"><code>setComplementThreshold(double)</code></a> will force using complement optimization.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#isUsingComplements">isUsingComplements</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#maxPartitions">maxPartitions</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#partitionSize">partitionSize</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.lucene.facet.search.FacetsAccumulator">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.lucene.facet.search.<a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html" title="class in org.apache.lucene.facet.search">FacetsAccumulator</a></h3>
<code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#facetArrays">facetArrays</a>, <a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#indexReader">indexReader</a>, <a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#searchParams">searchParams</a>, <a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#taxonomyReader">taxonomyReader</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#StandardFacetsAccumulator(org.apache.lucene.facet.params.FacetSearchParams, org.apache.lucene.index.IndexReader, org.apache.lucene.facet.taxonomy.TaxonomyReader)">StandardFacetsAccumulator</a></strong>(<a href="../../../../../org/apache/lucene/facet/params/FacetSearchParams.html" title="class in org.apache.lucene.facet.params">FacetSearchParams</a>&nbsp;searchParams,
                         <a href="../../../../../../core/org/apache/lucene/index/IndexReader.html?is-external=true" title="class or interface in org.apache.lucene.index">IndexReader</a>&nbsp;indexReader,
                         <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="class in org.apache.lucene.facet.taxonomy">TaxonomyReader</a>&nbsp;taxonomyReader)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#StandardFacetsAccumulator(org.apache.lucene.facet.params.FacetSearchParams, org.apache.lucene.index.IndexReader, org.apache.lucene.facet.taxonomy.TaxonomyReader, org.apache.lucene.facet.search.FacetArrays)">StandardFacetsAccumulator</a></strong>(<a href="../../../../../org/apache/lucene/facet/params/FacetSearchParams.html" title="class in org.apache.lucene.facet.params">FacetSearchParams</a>&nbsp;searchParams,
                         <a href="../../../../../../core/org/apache/lucene/index/IndexReader.html?is-external=true" title="class or interface in org.apache.lucene.index">IndexReader</a>&nbsp;indexReader,
                         <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="class in org.apache.lucene.facet.taxonomy">TaxonomyReader</a>&nbsp;taxonomyReader,
                         <a href="../../../../../org/apache/lucene/facet/search/FacetArrays.html" title="class in org.apache.lucene.facet.search">FacetArrays</a>&nbsp;facetArrays)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/FacetResult.html" title="class in org.apache.lucene.facet.search">FacetResult</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#accumulate(java.util.List)">accumulate</a></strong>(<a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/FacetsCollector.MatchingDocs.html" title="class in org.apache.lucene.facet.search">FacetsCollector.MatchingDocs</a>&gt;&nbsp;matchingDocs)</code>
<div class="block">Used by <a href="../../../../../org/apache/lucene/facet/search/FacetsCollector.html" title="class in org.apache.lucene.facet.search"><code>FacetsCollector</code></a> to build the list of <a href="../../../../../org/apache/lucene/facet/search/FacetResult.html" title="class in org.apache.lucene.facet.search"><code>facet results</code></a> that match the <a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search"><code>facet requests</code></a> that were
 given in the constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/FacetResult.html" title="class in org.apache.lucene.facet.search">FacetResult</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#accumulate(org.apache.lucene.facet.search.ScoredDocIDs)">accumulate</a></strong>(<a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a>&nbsp;docids)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#actualDocsToAccumulate(org.apache.lucene.facet.search.ScoredDocIDs)">actualDocsToAccumulate</a></strong>(<a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a>&nbsp;docids)</code>
<div class="block">Set the actual set of documents over which accumulation should take place.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../org/apache/lucene/facet/partitions/PartitionsFacetResultsHandler.html" title="class in org.apache.lucene.facet.partitions">PartitionsFacetResultsHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#createFacetResultsHandler(org.apache.lucene.facet.search.FacetRequest)">createFacetResultsHandler</a></strong>(<a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search">FacetRequest</a>&nbsp;fr)</code>
<div class="block">Creates a <a href="../../../../../org/apache/lucene/facet/search/FacetResultsHandler.html" title="class in org.apache.lucene.facet.search"><code>FacetResultsHandler</code></a> that matches the given
 <a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search"><code>FacetRequest</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://download.oracle.com/javase/6/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/CategoryListIterator.html" title="interface in org.apache.lucene.facet.search">CategoryListIterator</a>,<a href="../../../../../org/apache/lucene/facet/search/Aggregator.html" title="interface in org.apache.lucene.facet.search">Aggregator</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#getCategoryListMap(org.apache.lucene.facet.search.FacetArrays, int)">getCategoryListMap</a></strong>(<a href="../../../../../org/apache/lucene/facet/search/FacetArrays.html" title="class in org.apache.lucene.facet.search">FacetArrays</a>&nbsp;facetArrays,
                  int&nbsp;partition)</code>
<div class="block">Create an <a href="../../../../../org/apache/lucene/facet/search/Aggregator.html" title="interface in org.apache.lucene.facet.search"><code>Aggregator</code></a> and a <a href="../../../../../org/apache/lucene/facet/search/CategoryListIterator.html" title="interface in org.apache.lucene.facet.search"><code>CategoryListIterator</code></a> for each
 and every <a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search"><code>FacetRequest</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#getComplementThreshold()">getComplementThreshold</a></strong>()</code>
<div class="block">Returns the complement threshold.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#getTotalCountsFactor()">getTotalCountsFactor</a></strong>()</code>
<div class="block">Expert: factor by which counts should be multiplied when initializing
 the count arrays from total counts.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#isUsingComplements()">isUsingComplements</a></strong>()</code>
<div class="block">Returns true if complements are enabled.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#mayComplement()">mayComplement</a></strong>()</code>
<div class="block">check if all requests are complementable</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#setComplementThreshold(double)">setComplementThreshold</a></strong>(double&nbsp;complementThreshold)</code>
<div class="block">Set the complement threshold.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#shouldComplement(org.apache.lucene.facet.search.ScoredDocIDs)">shouldComplement</a></strong>(<a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a>&nbsp;docids)</code>
<div class="block">Check if it is worth to use complements</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.lucene.facet.search.FacetsAccumulator">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.facet.search.<a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html" title="class in org.apache.lucene.facet.search">FacetsAccumulator</a></h3>
<code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#create(org.apache.lucene.facet.params.FacetSearchParams, org.apache.lucene.index.IndexReader, org.apache.lucene.facet.taxonomy.TaxonomyReader)">create</a>, <a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#getAggregator()">getAggregator</a>, <a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#getCategoryLists()">getCategoryLists</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_COMPLEMENT_THRESHOLD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_COMPLEMENT_THRESHOLD</h4>
<pre>public static final&nbsp;double DEFAULT_COMPLEMENT_THRESHOLD</pre>
<div class="block">Default threshold for using the complements optimization.
 If accumulating facets for a document set larger than this ratio of the index size than 
 perform the complement optimization.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#setComplementThreshold(double)"><code>for more info on the complements optimization.</code></a>, 
<a href="../../../../../constant-values.html#org.apache.lucene.facet.search.StandardFacetsAccumulator.DEFAULT_COMPLEMENT_THRESHOLD">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DISABLE_COMPLEMENT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DISABLE_COMPLEMENT</h4>
<pre>public static final&nbsp;double DISABLE_COMPLEMENT</pre>
<div class="block">Passing this to <a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#setComplementThreshold(double)"><code>setComplementThreshold(double)</code></a> will disable using complement optimization.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.lucene.facet.search.StandardFacetsAccumulator.DISABLE_COMPLEMENT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FORCE_COMPLEMENT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FORCE_COMPLEMENT</h4>
<pre>public static final&nbsp;double FORCE_COMPLEMENT</pre>
<div class="block">Passing this to <a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#setComplementThreshold(double)"><code>setComplementThreshold(double)</code></a> will force using complement optimization.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.apache.lucene.facet.search.StandardFacetsAccumulator.FORCE_COMPLEMENT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="partitionSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>partitionSize</h4>
<pre>protected&nbsp;int partitionSize</pre>
</li>
</ul>
<a name="maxPartitions">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxPartitions</h4>
<pre>protected&nbsp;int maxPartitions</pre>
</li>
</ul>
<a name="isUsingComplements">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isUsingComplements</h4>
<pre>protected&nbsp;boolean isUsingComplements</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="StandardFacetsAccumulator(org.apache.lucene.facet.params.FacetSearchParams, org.apache.lucene.index.IndexReader, org.apache.lucene.facet.taxonomy.TaxonomyReader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>StandardFacetsAccumulator</h4>
<pre>public&nbsp;StandardFacetsAccumulator(<a href="../../../../../org/apache/lucene/facet/params/FacetSearchParams.html" title="class in org.apache.lucene.facet.params">FacetSearchParams</a>&nbsp;searchParams,
                         <a href="../../../../../../core/org/apache/lucene/index/IndexReader.html?is-external=true" title="class or interface in org.apache.lucene.index">IndexReader</a>&nbsp;indexReader,
                         <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="class in org.apache.lucene.facet.taxonomy">TaxonomyReader</a>&nbsp;taxonomyReader)</pre>
</li>
</ul>
<a name="StandardFacetsAccumulator(org.apache.lucene.facet.params.FacetSearchParams, org.apache.lucene.index.IndexReader, org.apache.lucene.facet.taxonomy.TaxonomyReader, org.apache.lucene.facet.search.FacetArrays)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StandardFacetsAccumulator</h4>
<pre>public&nbsp;StandardFacetsAccumulator(<a href="../../../../../org/apache/lucene/facet/params/FacetSearchParams.html" title="class in org.apache.lucene.facet.params">FacetSearchParams</a>&nbsp;searchParams,
                         <a href="../../../../../../core/org/apache/lucene/index/IndexReader.html?is-external=true" title="class or interface in org.apache.lucene.index">IndexReader</a>&nbsp;indexReader,
                         <a href="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="class in org.apache.lucene.facet.taxonomy">TaxonomyReader</a>&nbsp;taxonomyReader,
                         <a href="../../../../../org/apache/lucene/facet/search/FacetArrays.html" title="class in org.apache.lucene.facet.search">FacetArrays</a>&nbsp;facetArrays)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="accumulate(org.apache.lucene.facet.search.ScoredDocIDs)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accumulate</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/FacetResult.html" title="class in org.apache.lucene.facet.search">FacetResult</a>&gt;&nbsp;accumulate(<a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a>&nbsp;docids)
                             throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="mayComplement()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mayComplement</h4>
<pre>protected&nbsp;boolean&nbsp;mayComplement()</pre>
<div class="block">check if all requests are complementable</div>
</li>
</ul>
<a name="createFacetResultsHandler(org.apache.lucene.facet.search.FacetRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFacetResultsHandler</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/lucene/facet/partitions/PartitionsFacetResultsHandler.html" title="class in org.apache.lucene.facet.partitions">PartitionsFacetResultsHandler</a>&nbsp;createFacetResultsHandler(<a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search">FacetRequest</a>&nbsp;fr)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#createFacetResultsHandler(org.apache.lucene.facet.search.FacetRequest)">FacetsAccumulator</a></code></strong></div>
<div class="block">Creates a <a href="../../../../../org/apache/lucene/facet/search/FacetResultsHandler.html" title="class in org.apache.lucene.facet.search"><code>FacetResultsHandler</code></a> that matches the given
 <a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search"><code>FacetRequest</code></a>.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#createFacetResultsHandler(org.apache.lucene.facet.search.FacetRequest)">createFacetResultsHandler</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html" title="class in org.apache.lucene.facet.search">FacetsAccumulator</a></code></dd>
</dl>
</li>
</ul>
<a name="actualDocsToAccumulate(org.apache.lucene.facet.search.ScoredDocIDs)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>actualDocsToAccumulate</h4>
<pre>protected&nbsp;<a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a>&nbsp;actualDocsToAccumulate(<a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a>&nbsp;docids)
                                       throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Set the actual set of documents over which accumulation should take place.
 <p>
 Allows to override the set of documents to accumulate for. Invoked just
 before actual accumulating starts. From this point that set of documents
 remains unmodified. Default implementation just returns the input
 unchanged.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>docids</code> - candidate documents to accumulate for</dd>
<dt><span class="strong">Returns:</span></dt><dd>actual documents to accumulate for</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="shouldComplement(org.apache.lucene.facet.search.ScoredDocIDs)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldComplement</h4>
<pre>protected&nbsp;boolean&nbsp;shouldComplement(<a href="../../../../../org/apache/lucene/facet/search/ScoredDocIDs.html" title="interface in org.apache.lucene.facet.search">ScoredDocIDs</a>&nbsp;docids)</pre>
<div class="block">Check if it is worth to use complements</div>
</li>
</ul>
<a name="getTotalCountsFactor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTotalCountsFactor</h4>
<pre>protected&nbsp;double&nbsp;getTotalCountsFactor()</pre>
<div class="block">Expert: factor by which counts should be multiplied when initializing
 the count arrays from total counts.
 Default implementation for this returns 1, which is a no op.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a factor by which total counts should be multiplied</dd></dl>
</li>
</ul>
<a name="getCategoryListMap(org.apache.lucene.facet.search.FacetArrays, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCategoryListMap</h4>
<pre>protected&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/CategoryListIterator.html" title="interface in org.apache.lucene.facet.search">CategoryListIterator</a>,<a href="../../../../../org/apache/lucene/facet/search/Aggregator.html" title="interface in org.apache.lucene.facet.search">Aggregator</a>&gt;&nbsp;getCategoryListMap(<a href="../../../../../org/apache/lucene/facet/search/FacetArrays.html" title="class in org.apache.lucene.facet.search">FacetArrays</a>&nbsp;facetArrays,
                                                          int&nbsp;partition)
                                                               throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create an <a href="../../../../../org/apache/lucene/facet/search/Aggregator.html" title="interface in org.apache.lucene.facet.search"><code>Aggregator</code></a> and a <a href="../../../../../org/apache/lucene/facet/search/CategoryListIterator.html" title="interface in org.apache.lucene.facet.search"><code>CategoryListIterator</code></a> for each
 and every <a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search"><code>FacetRequest</code></a>. Generating a map, matching each
 categoryListIterator to its matching aggregator.
 <p>
 If two CategoryListIterators are served by the same aggregator, a single
 aggregator is returned for both.
 
 <b>NOTE: </b>If a given category list iterator is needed with two different
 aggregators (e.g counting and association) - an exception is thrown as this
 functionality is not supported at this time.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="accumulate(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accumulate</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/FacetResult.html" title="class in org.apache.lucene.facet.search">FacetResult</a>&gt;&nbsp;accumulate(<a href="http://download.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../org/apache/lucene/facet/search/FacetsCollector.MatchingDocs.html" title="class in org.apache.lucene.facet.search">FacetsCollector.MatchingDocs</a>&gt;&nbsp;matchingDocs)
                             throws <a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#accumulate(java.util.List)">FacetsAccumulator</a></code></strong></div>
<div class="block">Used by <a href="../../../../../org/apache/lucene/facet/search/FacetsCollector.html" title="class in org.apache.lucene.facet.search"><code>FacetsCollector</code></a> to build the list of <a href="../../../../../org/apache/lucene/facet/search/FacetResult.html" title="class in org.apache.lucene.facet.search"><code>facet results</code></a> that match the <a href="../../../../../org/apache/lucene/facet/search/FacetRequest.html" title="class in org.apache.lucene.facet.search"><code>facet requests</code></a> that were
 given in the constructor.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html#accumulate(java.util.List)">accumulate</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/apache/lucene/facet/search/FacetsAccumulator.html" title="class in org.apache.lucene.facet.search">FacetsAccumulator</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>matchingDocs</code> - the documents that matched the query, per-segment.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getComplementThreshold()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getComplementThreshold</h4>
<pre>public&nbsp;double&nbsp;getComplementThreshold()</pre>
<div class="block">Returns the complement threshold.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#setComplementThreshold(double)"><code>setComplementThreshold(double)</code></a></dd></dl>
</li>
</ul>
<a name="setComplementThreshold(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setComplementThreshold</h4>
<pre>public&nbsp;void&nbsp;setComplementThreshold(double&nbsp;complementThreshold)</pre>
<div class="block">Set the complement threshold.
 This threshold will dictate whether the complements optimization is applied.
 The optimization is to count for less documents. It is useful when the same 
 FacetSearchParams are used for varying sets of documents. The first time 
 complements is used the "total counts" are computed - counting for all the 
 documents in the collection. Then, only the complementing set of documents
 is considered, and used to decrement from the overall counts, thereby 
 walking through less documents, which is faster.
 <p>
 For the default settings see <a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#DEFAULT_COMPLEMENT_THRESHOLD"><code>DEFAULT_COMPLEMENT_THRESHOLD</code></a>.
 <p>
 To forcing complements in all cases pass <a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#FORCE_COMPLEMENT"><code>FORCE_COMPLEMENT</code></a>.
 This is mostly useful for testing purposes, as forcing complements when only 
 tiny fraction of available documents match the query does not make sense and 
 would incur performance degradations.
 <p>
 To disable complements pass <a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#DISABLE_COMPLEMENT"><code>DISABLE_COMPLEMENT</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>complementThreshold</code> - the complement threshold to set</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../org/apache/lucene/facet/search/StandardFacetsAccumulator.html#getComplementThreshold()"><code>getComplementThreshold()</code></a></dd></dl>
</li>
</ul>
<a name="isUsingComplements()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isUsingComplements</h4>
<pre>public&nbsp;boolean&nbsp;isUsingComplements()</pre>
<div class="block">Returns true if complements are enabled.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/StandardFacetsAccumulator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/lucene/facet/search/ScoringAggregator.html" title="class in org.apache.lucene.facet.search"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/lucene/facet/search/SumScoreFacetRequest.html" title="class in org.apache.lucene.facet.search"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/lucene/facet/search/StandardFacetsAccumulator.html" target="_top">Frames</a></li>
<li><a href="StandardFacetsAccumulator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>
          <i>Copyright &copy; 2000-2013 Apache Software Foundation.  All Rights Reserved.</i>
          <script src='../../../../../prettify.js' type='text/javascript'></script>
          <script type='text/javascript'>
            (function(){
              var oldonload = window.onload;
              if (typeof oldonload != 'function') {
                window.onload = prettyPrint;
              } else {
                window.onload = function() {
                  oldonload();
                  prettyPrint();
                }
              }
            })();
          </script>
        </small></p>
</body>
</html>
